{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TransitionItem from \"../TransitionItem\";\nimport { createAnimatedWrapper, getResolvedMetrics, mergeStyles } from \"../Utils\";\nimport { getInterpolatorTypes } from \"./InterpolatorTypes\";\nimport { InterpolatorSpecification } from \"../Types/InterpolatorSpecification\";\n\nvar getSharedElements = function getSharedElements(sharedElements, getInterpolationFunction) {\n  return sharedElements.map(function (pair, idx) {\n    var fromItem = pair.fromItem,\n        toItem = pair.toItem;\n    var element = React.Children.only(fromItem.reactElement.props.children);\n    var equalAspectRatio = getIsEqualAspectRatio(fromItem, toItem);\n    var transitionStyles = getTransitionStyle(fromItem, toItem, getInterpolationFunction, equalAspectRatio);\n    var key = \"so-\" + idx.toString();\n    var animationStyle = transitionStyles.styles;\n    var nativeAnimationStyle = [transitionStyles.nativeStyles];\n    var resolvedMetrics = getResolvedMetrics(fromItem, fromItem.metrics);\n    var overrideStyles = {\n      position: 'absolute',\n      left: resolvedMetrics.x,\n      top: resolvedMetrics.y,\n      width: resolvedMetrics.width,\n      height: resolvedMetrics.height\n    };\n\n    var props = _objectSpread(_objectSpread({}, element.props), {}, {\n      __index: fromItem.index\n    });\n\n    if (fromItem.animated) {\n      props[fromItem.animated] = getInterpolationFunction(false);\n    } else if (toItem.animated) {\n      props[toItem.animated] = getInterpolationFunction(false);\n    }\n\n    var component = React.createElement(element.type, _objectSpread(_objectSpread({}, props), {}, {\n      key: key\n    }));\n    return createAnimatedWrapper({\n      component: component,\n      nativeStyles: nativeAnimationStyle,\n      styles: animationStyle,\n      overrideStyles: overrideStyles,\n      equalAspectRatio: equalAspectRatio,\n      log: true,\n      logPrefix: \"SE: \" + fromItem.name + \"/\" + fromItem.route\n    });\n  });\n};\n\nvar getIsEqualAspectRatio = function getIsEqualAspectRatio(fromItem, toItem) {\n  var fromAspect = Math.round(fromItem.metrics.width / fromItem.metrics.height * 100) / 100;\n  var toAspect = Math.round(toItem.metrics.width / toItem.metrics.height * 100) / 100;\n  return fromAspect === toAspect;\n};\n\nvar getTransitionStyle = function getTransitionStyle(fromItem, toItem, getInterpolationFunction, equalAspectRatio) {\n  var interpolatorInfo = {\n    from: {\n      metrics: fromItem.metrics,\n      boundingbox: fromItem.boundingBoxMetrics,\n      style: fromItem.getFlattenedStyle()\n    },\n    to: {\n      metrics: toItem.metrics,\n      style: toItem.getFlattenedStyle(),\n      boundingbox: toItem.boundingBoxMetrics\n    },\n    scaleX: toItem.scaleRelativeTo(fromItem).x,\n    scaleY: toItem.scaleRelativeTo(fromItem).y,\n    equalAspectRatio: equalAspectRatio,\n    getInterpolation: getInterpolationFunction,\n    dimensions: Dimensions.get('window')\n  };\n  var nativeStyles = [];\n  var styles = [];\n  getInterpolatorTypes().forEach(function (interpolator) {\n    var interpolatorResult = interpolator.interpolatorFunction(interpolatorInfo);\n\n    if (interpolatorResult) {\n      if (interpolatorResult.nativeAnimationStyles) {\n        nativeStyles.push(interpolatorResult.nativeAnimationStyles);\n      }\n\n      if (interpolatorResult.animationStyles) {\n        styles.push(interpolatorResult.animationStyles);\n      }\n    }\n  });\n  return {\n    nativeStyles: _objectSpread({}, mergeStyles(nativeStyles)),\n    styles: _objectSpread({\n      width: fromItem.metrics.width,\n      height: fromItem.metrics.height\n    }, mergeStyles(styles))\n  };\n};\n\nexport { getSharedElements };","map":{"version":3,"sources":["/Users/sadu/Sites/WC/rubikssoft/ecomerce-mob-app/node_modules/react-navigation-fluid-transitions/Interpolators/getSharedElements.js"],"names":["React","TransitionItem","createAnimatedWrapper","getResolvedMetrics","mergeStyles","getInterpolatorTypes","InterpolatorSpecification","getSharedElements","sharedElements","getInterpolationFunction","map","pair","idx","fromItem","toItem","element","Children","only","reactElement","props","children","equalAspectRatio","getIsEqualAspectRatio","transitionStyles","getTransitionStyle","key","toString","animationStyle","styles","nativeAnimationStyle","nativeStyles","resolvedMetrics","metrics","overrideStyles","position","left","x","top","y","width","height","__index","index","animated","component","createElement","type","log","logPrefix","name","route","fromAspect","Math","round","toAspect","interpolatorInfo","from","boundingbox","boundingBoxMetrics","style","getFlattenedStyle","to","scaleX","scaleRelativeTo","scaleY","getInterpolation","dimensions","Dimensions","get","forEach","interpolator","interpolatorResult","interpolatorFunction","nativeAnimationStyles","push","animationStyles"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Dimensions } from 'react-native';\n\nimport TransitionItem from '../TransitionItem';\nimport { createAnimatedWrapper, getResolvedMetrics, mergeStyles } from '../Utils';\n\nimport { getInterpolatorTypes } from './InterpolatorTypes';\nimport { InterpolatorSpecification } from '../Types/InterpolatorSpecification';\n\nconst getSharedElements = (sharedElements: Array<any>,\n  getInterpolationFunction: Function) => sharedElements.map((pair, idx) => {\n  const { fromItem, toItem } = pair;\n  const element = React.Children.only(fromItem.reactElement.props.children);\n\n  const equalAspectRatio = getIsEqualAspectRatio(fromItem, toItem);\n\n  const transitionStyles = getTransitionStyle(fromItem, toItem, getInterpolationFunction,\n    equalAspectRatio);\n\n  const key = `so-${idx.toString()}`;\n  const animationStyle = transitionStyles.styles;\n  const nativeAnimationStyle = [transitionStyles.nativeStyles];\n  const resolvedMetrics = getResolvedMetrics(fromItem, fromItem.metrics);\n\n  const overrideStyles = {\n    position: 'absolute',\n    left: resolvedMetrics.x,\n    top: resolvedMetrics.y,\n    width: resolvedMetrics.width,\n    height: resolvedMetrics.height,\n  };\n\n  const props = { ...element.props, __index: fromItem.index };\n  if (fromItem.animated) {\n    props[fromItem.animated] = getInterpolationFunction(false);\n  } else if (toItem.animated) {\n    props[toItem.animated] = getInterpolationFunction(false);\n  }\n\n  const component = React.createElement(element.type, { ...props, key });\n\n  return createAnimatedWrapper({\n    component,\n    nativeStyles: nativeAnimationStyle,\n    styles: animationStyle,\n    overrideStyles,\n    equalAspectRatio,\n    log: true,\n    logPrefix: `SE: ${fromItem.name}/${fromItem.route}`,\n  });\n});\n\nconst getIsEqualAspectRatio = (fromItem, toItem) => {\n  const fromAspect = Math.round((fromItem.metrics.width / fromItem.metrics.height) * 100) / 100;\n  const toAspect = Math.round((toItem.metrics.width / toItem.metrics.height) * 100) / 100;\n  return fromAspect === toAspect;\n};\n\nconst getTransitionStyle = (\n  fromItem: TransitionItem, toItem: TransitionItem, getInterpolationFunction: Function,\n  equalAspectRatio: boolean,\n) => {\n  const interpolatorInfo: InterpolatorSpecification = {\n    from: {\n      metrics: fromItem.metrics,\n      boundingbox: fromItem.boundingBoxMetrics,\n      style: fromItem.getFlattenedStyle(),\n    },\n    to: {\n      metrics: toItem.metrics,\n      style: toItem.getFlattenedStyle(),\n      boundingbox: toItem.boundingBoxMetrics,\n    },\n    scaleX: toItem.scaleRelativeTo(fromItem).x,\n    scaleY: toItem.scaleRelativeTo(fromItem).y,\n    equalAspectRatio,\n    getInterpolation: getInterpolationFunction,\n    dimensions: Dimensions.get('window'),\n  };\n\n  const nativeStyles = [];\n  const styles = [];\n\n  getInterpolatorTypes().forEach(interpolator => {\n    const interpolatorResult = interpolator.interpolatorFunction(interpolatorInfo);\n    if (interpolatorResult) {\n      if (interpolatorResult.nativeAnimationStyles) {\n        nativeStyles.push(interpolatorResult.nativeAnimationStyles);\n      }\n      if (interpolatorResult.animationStyles) {\n        styles.push(interpolatorResult.animationStyles);\n      }\n    }\n  });\n\n  return {\n    nativeStyles: {\n      ...mergeStyles(nativeStyles),\n    },\n    styles: {\n      width: fromItem.metrics.width,\n      height: fromItem.metrics.height,\n      ...mergeStyles(styles),\n    },\n  };\n};\n\nexport { getSharedElements };\n"]},"metadata":{},"sourceType":"module"}